# REST (representational state transfer)

HTTPλ¥Ό ν†µν•΄ μ›Ή μ„λΉ„μ¤λ¥Ό λ…Έμ¶ν•λ” μ•„ν‚¤ν…μ²

- ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ μƒνΈμ‘μ©
  - μƒνƒ μ •λ³΄ μ£Όκ³ λ°›μ
  - λ‹¤μ–‘ν• ν‘ν„ μ§€μ› (JSON, XML λ“±)
- HTTP ν”„λ΅ν† μ½ κΈ°λ° λ™μ‘
  - ν‘μ¤€ν™”λ HTTP μ‚¬μ© β†’ λ‹¨μμ„±/λ²”μ©μ„±/μƒνΈ μ΄μ©μ„±
  - GET, PUT, POST, DELETE λ“± HTTP λ©”μ†λ“λ¥Ό ν†µν• μ‘μ—… μν–‰
- URIλ¥Ό ν†µν• μμ› λ…Έμ¶
  - μμ›μ„ λ‚νƒ€λ‚΄λ” μ‹λ³„μ β†’ λ…μ‚¬λ΅ ν‘ν„
- stateless μ•„ν‚¤ν…μ²
  - μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μƒνƒ μ μ§€ X β†’ ν΄λΌμ΄μ–ΈνΈκ°€ μƒνƒλ¥Ό κ΄€λ¦¬ν•΄μ•Ό ν•¨
  - λ…λ¦½μ μΈ μ”μ²­ β†’ μ‰½κ² ν™•μ¥ κ°€λ¥
  - GET μ”μ²­μ€ URIλ¥Ό κΈ°μ¤€μΌλ΅ μΊμ‹± κ°€λ¥
    - by ν΄λΌμ΄μ–ΈνΈβ€Άμ¤‘κ°„ μΊμ‹ μ„λ²„
  - ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ λμ¨ν• κ²°ν•©
- HTTP ν—¤λ”μ™€ μƒνƒμ½”λ“ β†’ λ…ν™•ν• κ²°κ³Ό μ „λ‹¬


### Javaμ—μ„ μ›Ή μ„λΉ„μ¤λ¥Ό κµ¬ν„ν•λ” λ°©λ²•

1. JAX-RS; Jarkarta RESTful web services
- RESTful μ›Ή μ„λΉ„μ¤λ¥Ό κµ¬μ¶•ν•κΈ° μ„ν• ν‘μ¤€ μ κ³µ
- μ£Όμ” κµ¬ν„μ²΄
  - Jersey
  - RESTEasy
  - Apache CXF
> Jarkarta EEλ” Java EEλ¥Ό λ€μ²΄ν•λ” ν‘μ¤€μΌλ΅, ν΄λΌμ°λ“ λ„¤μ΄ν‹°λΈ Java μ• ν”λ¦¬μΌ€μ΄μ…μ„ κµ¬μ¶•ν•κΈ° μ„ν• μ—¬λ¬ μ‚¬μ–‘λ“¤μ μ§‘ν•©μ΄λ‹¤.

2. Spring MVC 
- JAX-RS ν‘μ¤€μ„ λ”°λ¥΄μ§„ μ•μ§€λ§, μμ²΄μ μΈ λ°©μ‹μΌλ΅ REST κµ¬ν„
- Spring μƒνƒκ³„μ™€ ν†µν•© μ©μ΄

## Spring MVC support

> `@ResponseBody`
> - controller λ©”μ†λ“μ—μ„ Java κ°μ²΄ λ°ν™ β†’ message converterκ°€ ν‹°μ… λ³€ν™
>   - μ£Όλ΅ JSONβ€ΆXML ν•μ‹ 
>   - λ³€ν™ νƒ€μ…μ€ `Accept` μ”μ²­ ν—¤λ”λ¥Ό κΈ°λ°μΌλ΅ κ²°μ •

### GET

- `@GetMapping` : GET μ”μ²­ μ²λ¦¬ μ–΄λ…Έν…μ΄μ…
  - `@RequestMapping(path="[PATH]", method=RequestMethod.GET)`μ μ¶•μ•½ν•
- μ„±κ³µμ μΌλ΅ μμ›μ„ μ΅°νν• κ²½μ°, `200 OK` μ „λ‹¬

> π’΅ HTTP GET
> - μμ›μ„ μ΅°νν•λ” λ©”μ†λ“
> - safe : μ„λ²„μ μƒνƒλ¥Ό λ³€κ²½ν•μ§€ μ•μ
> - idempotent : λ™μΌν• GET μ”μ²­μ„ μ—¬λ¬ λ² λ³΄λ‚΄λ„ κ°™μ€ κ²°κ³Όλ¥Ό λ°ν™

### PUT

- `@PutMapping` : PUT μ”μ²­ μ²λ¦¬ μ–΄λ…Έν…μ΄μ…
  - `@RequestMapping(path="[PATH]", method=RequestMethod.PUT)`μ μ¶•μ•½ν•
- `@RequestBody` : ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ λ°μ΄ν„°λ¥Ό μ¶”μ¶ν•κ³  Java κ°μ²΄λ΅ λ³€ν™
- μ„±κ³µμ μΌλ΅ μμ›μ„ μ—…λ°μ΄νΈν• κ²½μ°, `204 No Content` μ „λ‹¬

> π’΅ HTTP PUT
> - μμ›μ„ μ—…λ°μ΄νΈν•λ” λ©”μ†λ“
>   - κΈ°μ΅΄ μμ›μ„ λ€μ²΄ν•λ” λ° μ‚¬μ©
>   - μμ›μ΄ μ΅΄μ¬ν•μ§€ μ•μ„ κ²½μ° μƒ μμ› μƒμ„±
> - idempotent : λ™μΌν• PUT μ”μ²­μ„ μ—¬λ¬ λ² λ³΄λ‚΄λ„ κ°™μ€ κ²°κ³Όλ¥Ό λ°ν™

> π¤” PUT vs. PATCH <br/>
> PUTμ€ μμ› μ „μ²΄λ¥Ό, PATCHλ” μμ›μ μΌλ¶€λ¥Ό μ—…λ°μ΄νΈν•λ‹¤.

### POST

- `@PostMapping` : POST μ”μ²­ μ²λ¦¬ μ–΄λ…Έν…μ΄μ…
  - `@RequestMapping(path="[PATH]", method=RequestMethod.POST)`μ μ¶•μ•½ν•
- μ„±κ³µμ μΌλ΅ μμ›μ„ μƒμ„±ν• κ²½μ°, `201 Created` μ „λ‹¬
  - μƒλ΅­κ² μƒμ„±λ μμ›μ URIλ¥Ό `location` ν—¤λ”μ— λ„£μ–΄μ„ μ „λ‹¬

> π¤” URIλ” μ–΄λ–»κ² μƒμ„±λ κΉ?
> 
> 1. `UriComponentsBuilder`
>    - λ…μ‹μ μΌλ΅ URI μƒμ„±
> 2. `ServletUriComponentsBuilder`
>    - `UriComponentsBuilder`μ ν•μ„ ν΄λμ¤
>    - ν„μ¬ μ”μ²­μ URI μ •λ³΄λ¥Ό λ°”νƒ•μΌλ΅ μƒλ€ κ²½λ΅λ¥Ό μ¶”κ°€β€Άμμ •
>   ```java
>   URI location = ServletUriComponentsBuilder
>     .fromCurrentRequestsUri()
>     .path("/{memberId}")
>     .buildAndExpand(member.getId())
>     .toUri();
> ```

### DELETE

- `@DeleteMapping` : DELETE μ”μ²­ μ²λ¦¬ μ–΄λ…Έν…μ΄μ…
  - `@RequestMapping(path="[PATH]", method=RequestMethod.DELETE)`μ μ¶•μ•½ν•
- μ„±κ³µμ μΌλ΅ μμ›μ„ μ—…λ°μ΄νΈν• κ²½μ°, `204 No Content` μ „λ‹¬

|      | GET | PUT | POST | DELETE |
|------|-----|-----|------|--------|
| safe | O   | X   | X    | X      |
| idempotent | O   | O   | X    | O      |


## ETC

### `RequestEntity`

HTTP μ”μ²­μ„ λ‚νƒ€λ‚΄λ” κ°μ²΄
- λ³µμ΅ν• μ”μ²­μ„ λ³΄λ‚΄μ•Ό ν•  λ•
- μ£Όλ΅ `RestTemplate`κ³Ό ν•¨κ» μ‚¬μ©
  - `RestTemplate` : HTTP μ”μ²­ β†’ ν…ν”λ¦ΏμΌλ΅ μ •μ
    - λ§μ΄ν¬λ΅μ„λΉ„μ¤ κ°„ ν†µμ‹ , μ™Έλ¶€ API νΈμ¶ μ‹ μ‚¬μ©
      - `RestTemplateBuilder` λΉ μλ™μΌλ΅ κµ¬μ„± β†’ `RestTemplate` μ‰½κ² μƒμ„±

> π¤” `RestTemplate` vs. `WebClient`
> - `RestTemplate`
>   - Spring MVCμ—μ„ μ κ³µ
>   - λΈ”λ΅ν‚Ήλ§ μ§€μ›
> - `WebClient`
>   - Spring WebFluxμ—μ„ μ κ³µ (Spring MVCλ„ κ°€λ¥)
>   - λΈ”λ΅ν‚Ή + λ…ΌλΈ”λ΅ν‚Ή + λΉ„λ™κΈ° μ§€μ›

### `ResponseEntity`

HTTP μ‘λ‹µμ„ λ‚νƒ€λ‚΄λ” κ°μ²΄
- μ‘λ‹µμ μ„Έλ¶€μ‚¬ν•­ μ„¤μ •ν•  λ•
- μ£Όλ΅ μ»¨νΈλ΅¤λ¬ λ©”μ†λ“μ—μ„ μ‚¬μ©